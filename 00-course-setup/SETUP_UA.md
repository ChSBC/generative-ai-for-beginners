# Налаштування середовища розробки

Ми налаштували цей репозиторій та курс з [контейнером розробки](https://containers.dev), який має універсальне середовище виконання, що підтримує розробку на Python3, .NET, Node.js та Java. Відповідна конфігурація визначена у файлі `devcontainer.json`, розташованому в папці `.devcontainer/` в корені цього репозиторію.

Щоб активувати контейнер розробки, запустіть його в [GitHub Codespaces](https://docs.github.com/en/codespaces/overview) (для хмарного середовища виконання) або в [Docker Desktop](https://docs.docker.com/desktop/) (для локального середовища виконання). Прочитайте [цю документацію](https://code.visualstudio.com/docs/devcontainers/containers) для отримання додаткової інформації про те, як працюють контейнери розробки в VS Code.

> [!ПОРАДА]
> Ми рекомендуємо використовувати GitHub Codespaces для швидкого старту з мінімальними зусиллями. Він надає щедру [безкоштовну квоту](https://docs.github.com/billing/managing-billing-for-github-codespaces/about-billing-for-github-codespaces#monthly-included-storage-and-core-hours-for-personal-accounts) для персональних облікових записів. Налаштуйте [таймаути](https://docs.github.com/codespaces/setting-your-user-preferences/setting-your-timeout-period-for-github-codespaces) для зупинки або видалення неактивних codespaces, щоб максимально використати вашу квоту.

## 1. Виконання завдань

Кожен урок матиме _необов'язкові_ завдання, які можуть бути надані однією або кількома мовами програмування, включаючи: Python, .NET/C#, Java та JavaScript/TypeScript. Цей розділ надає загальні вказівки щодо виконання цих завдань.

### 1.1 Завдання на Python

Завдання Python надаються або як програми (файли `.py`), або як Jupyter notebooks (файли `.ipynb`).
- Щоб запустити ноутбук, відкрийте його у Visual Studio Code, потім натисніть _Вибрати ядро_ (вгорі праворуч) і виберіть показану опцію Python 3 за замовчуванням. Тепер ви можете _Запустити все_ для виконання ноутбука.
- Щоб запустити Python-програми з командного рядка, дотримуйтесь специфічних для завдання інструкцій, щоб вибрати правильні файли та надати необхідні аргументи.

## 2. Налаштування провайдерів

Завдання **можуть** бути налаштовані для роботи з одним або кількома розгортаннями Великих Мовних Моделей (LLM) через підтримуваного постачальника послуг, як-от OpenAI, Azure чи Hugging Face. Вони надають _хостингову кінцеву точку_ (API), до якої ми можемо отримати доступ програмно за допомогою правильних облікових даних (API-ключа або токена). У цьому курсі ми розглядаємо таких провайдерів:

 - [OpenAI](https://platform.openai.com/docs/models) з різноманітними моделями, включаючи основну серію GPT.
 - [Azure OpenAI](https://learn.microsoft.com/azure/ai-services/openai/) для моделей OpenAI з фокусом на готовність до корпоративного використання
 - [Hugging Face](https://huggingface.co/docs/hub/index) для моделей з відкритим кодом та сервера виведення

**Вам потрібно буде використовувати власні облікові записи для цих вправ**. Завдання є необов'язковими, тому ви можете вибрати налаштування одного, всіх - або жодного - з провайдерів залежно від ваших інтересів. Деякі вказівки щодо реєстрації:

| Реєстрація | Вартість | API-ключ | Пісочниця | Коментарі |
|:---|:---|:---|:---|:---|
| [OpenAI](https://platform.openai.com/signup)| [Ціни](https://openai.com/pricing#language-models)| [На основі проекту](https://platform.openai.com/api-keys) | [Без коду, веб](https://platform.openai.com/playground) | Доступні кілька моделей |
| [Azure](https://aka.ms/azure/free)| [Ціни](https://azure.microsoft.com/pricing/details/cognitive-services/openai-service/)| [SDK Швидкий старт](https://learn.microsoft.com/azure/ai-services/openai/quickstart)| [Studio Швидкий старт](https://learn.microsoft.com/azure/ai-services/openai/quickstart) | [Потрібно заздалегідь подати заявку на доступ](https://learn.microsoft.com/azure/ai-services/openai/)|
| [Hugging Face](https://huggingface.co/join) | [Ціни](https://huggingface.co/pricing) | [Токени доступу](https://huggingface.co/docs/hub/security-tokens) | [Hugging Chat](https://huggingface.co/chat/) | [Hugging Chat має обмежені моделі](https://huggingface.co/chat/models) |
| | | | | |

Дотримуйтесь наведених нижче вказівок, щоб _налаштувати_ цей репозиторій для використання з різними провайдерами. Завдання, що вимагають конкретного провайдера, міститимуть одну з цих позначок у назві файлу:
 - `aoai` - потребує кінцевої точки Azure OpenAI, ключа
 - `oai` - потребує кінцевої точки OpenAI, ключа
 - `hf` - потребує токена Hugging Face

Ви можете налаштувати одного, жодного або всіх провайдерів. Відповідні завдання просто видадуть помилку при відсутності облікових даних.

### 2.1. Створення файлу `.env`

Ми припускаємо, що ви вже прочитали вказівки вище та зареєструвалися у відповідного провайдера, і отримали необхідні облікові дані для автентифікації (API_KEY або токен). У випадку Azure OpenAI ми припускаємо, що у вас також є дійсне розгортання Служби Azure OpenAI (кінцева точка) з щонайменше однією розгорнутою моделлю GPT для чат-завершення.

Наступним кроком є налаштування ваших **локальних змінних середовища** наступним чином:

1. Знайдіть у кореневій папці файл `.env.copy`, який повинен мати такий вміст:

   ```bash
   # OpenAI Provider
   OPENAI_API_KEY='<додайте ваш ключ OpenAI API тут>'

   ## Azure OpenAI
   AZURE_OPENAI_API_VERSION='2024-02-01' # За замовчуванням встановлено!
   AZURE_OPENAI_API_KEY='<додайте ваш ключ AOAI тут>'
   AZURE_OPENAI_ENDPOINT='<додайте вашу кінцеву точку служби AOIA тут>'
   AZURE_OPENAI_DEPLOYMENT='<додайте назву вашої моделі для завершення чату тут>'
   AZURE_OPENAI_EMBEDDINGS_DEPLOYMENT='<додайте назву вашої моделі для вбудовувань тут>'

   ## Hugging Face
   HUGGING_FACE_API_KEY='<додайте ваш API або токен HuggingFace тут>'
   ```

2. Скопіюйте цей файл у `.env` за допомогою наведеної нижче команди. Цей файл _ігнорується git-ом_, зберігаючи секрети в безпеці.

   ```bash
   cp .env.copy .env
   ```

3. Заповніть значення (замініть заповнювачі праворуч від `=`), як описано в наступному розділі.

3. (Необов'язково) Якщо ви використовуєте GitHub Codespaces, у вас є можливість зберегти змінні середовища як _секрети Codespaces_, пов'язані з цим репозиторієм. У такому випадку вам не потрібно буде налаштовувати локальний файл .env. **Однак зверніть увагу, що ця опція працює тільки якщо ви використовуєте GitHub Codespaces.** Вам все одно потрібно буде налаштувати файл .env, якщо ви натомість використовуєте Docker Desktop.

### 2.2. Заповнення файлу `.env`

Давайте швидко розглянемо назви змінних, щоб зрозуміти, що вони представляють:

| Змінна | Опис |
|:---|:---|
| HUGGING_FACE_API_KEY | Це токен доступу користувача, який ви налаштували у своєму профілі |
| OPENAI_API_KEY | Це ключ авторизації для використання сервісу для не-Azure OpenAI кінцевих точок |
| AZURE_OPENAI_API_KEY | Це ключ авторизації для використання цього сервісу |
| AZURE_OPENAI_ENDPOINT | Це розгорнута кінцева точка для ресурсу Azure OpenAI |
| AZURE_OPENAI_DEPLOYMENT | Це кінцева точка розгортання моделі _генерації тексту_ |
| AZURE_OPENAI_EMBEDDINGS_DEPLOYMENT | Це кінцева точка розгортання моделі _текстових вбудовувань_ |
| | |

Примітка: Останні дві змінні Azure OpenAI відображають модель за замовчуванням для завершення чату (генерація тексту) та векторного пошуку (вбудовування) відповідно. Інструкції щодо їх налаштування будуть визначені у відповідних завданнях.

### 2.3 Налаштування Azure: З Порталу

Значення кінцевої точки та ключа Azure OpenAI можна знайти на [Порталі Azure](https://portal.azure.com), тож почнемо звідти.

1. Перейдіть на [Портал Azure](https://portal.azure.com)
2. Натисніть опцію **Ключі та кінцева точка** на бічній панелі (меню зліва).
3. Натисніть **Показати ключі** - ви повинні побачити наступне: КЛЮЧ 1, КЛЮЧ 2 та Кінцева точка.
4. Використовуйте значення КЛЮЧ 1 для AZURE_OPENAI_API_KEY
5. Використовуйте значення Кінцевої точки для AZURE_OPENAI_ENDPOINT

Далі нам потрібні кінцеві точки для конкретних розгорнутих моделей.

1. Натисніть опцію **Розгортання моделей** на бічній панелі (ліве меню) для ресурсу Azure OpenAI.
2. На цільовій сторінці натисніть **Керувати розгортаннями**

Це перенесе вас на веб-сайт Azure OpenAI Studio, де ми знайдемо інші значення, як описано нижче.

### 2.4 Налаштування Azure: Зі Studio

1. Перейдіть до [Azure OpenAI Studio](https://oai.azure.com) **з вашого ресурсу**, як описано вище.
2. Натисніть вкладку **Розгортання** (бічна панель, зліва), щоб переглянути наразі розгорнуті моделі.
3. Якщо ваша бажана модель не розгорнута, використовуйте **Створити нове розгортання** для її розгортання.
4. Вам потрібна модель _генерації тексту_ - ми рекомендуємо: **gpt-35-turbo**
5. Вам потрібна модель _вбудовування тексту_ - ми рекомендуємо **text-embedding-ada-002**

Тепер оновіть змінні середовища, щоб відобразити використану _Назву розгортання_. Це зазвичай буде така ж назва, як і назва моделі, якщо ви явно її не змінили. Отже, наприклад, у вас може бути:

```bash
AZURE_OPENAI_DEPLOYMENT='gpt-35-turbo'
AZURE_OPENAI_EMBEDDINGS_DEPLOYMENT='text-embedding-ada-002'
```

**Не забудьте зберегти файл .env після завершення**. Тепер ви можете вийти з файлу і повернутися до інструкцій щодо запуску ноутбука.

### 2.5 Налаштування OpenAI: З Профілю

Ваш ключ OpenAI API можна знайти у вашому [обліковому записі OpenAI](https://platform.openai.com/api-keys). Якщо у вас його немає, ви можете зареєструвати обліковий запис і створити API-ключ. Після отримання ключа ви можете використати його для заповнення змінної `OPENAI_API_KEY` у файлі `.env`.

### 2.6 Налаштування Hugging Face: З Профілю

Ваш токен Hugging Face можна знайти у вашому профілі в розділі [Токени доступу](https://huggingface.co/settings/tokens). Не публікуйте і не діліться ними публічно. Замість цього створіть новий токен для використання в цьому проекті та скопіюйте його у файл `.env` у змінну `HUGGING_FACE_API_KEY`. _Примітка:_ Технічно це не API-ключ, але він використовується для автентифікації, тому ми зберігаємо цю схему іменування для послідовності.