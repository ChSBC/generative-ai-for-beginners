# Створення чат-додатків на основі генеративного ШІ

[![Створення чат-додатків на основі генеративного ШІ](./images/07-lesson-banner.png?WT.mc_id=academic-105485-koreyst)](https://aka.ms/gen-ai-lessons7-gh?WT.mc_id=academic-105485-koreyst)

> _(Клацніть на зображення вище, щоб переглянути відео цього уроку)_

Тепер, коли ми побачили, як можемо будувати додатки для генерації тексту, давайте розглянемо чат-додатки.

Чат-додатки стали невід'ємною частиною нашого повсякденного життя, пропонуючи більше, ніж просто засіб для повсякденного спілкування. Вони є невід'ємними компонентами обслуговування клієнтів, технічної підтримки і навіть складних консультаційних систем. Цілком ймовірно, що ви нещодавно отримували допомогу від чат-додатку. Коли ми інтегруємо більш передові технології, такі як генеративний ШІ, у ці платформи, складність зростає, як і виклики.

Деякі питання, на які нам потрібно отримати відповіді:

- **Створення додатку**. Як ми можемо ефективно створювати й без проблем інтегрувати ці додатки на базі ШІ для конкретних випадків використання?
- **Моніторинг**. Після розгортання, як ми можемо контролювати та забезпечувати, щоб додатки працювали на найвищому рівні якості, як з точки зору функціональності, так і дотримуючись [шести принципів відповідального ШІ](https://www.microsoft.com/ai/responsible-ai?WT.mc_id=academic-105485-koreyst)?

Коли ми рухаємося далі в епоху, визначену автоматизацією та безперешкодною взаємодією між людиною та машиною, розуміння того, як генеративний ШІ трансформує обсяг, глибину та адаптивність чат-додатків, стає необхідним. Цей урок дослідить аспекти архітектури, які підтримують ці складні системи, заглибиться в методології їх тонкого налаштування для завдань, специфічних для конкретних доменів, та оцінить показники й міркування, що стосуються забезпечення відповідального розгортання ШІ.

## Вступ

Цей урок охоплює:

- Техніки для ефективного створення та інтеграції чат-додатків.
- Як застосовувати налаштування та тонке налаштування до додатків.
- Стратегії та міркування для ефективного моніторингу чат-додатків.

## Навчальні цілі

До кінця цього уроку ви зможете:

- Описати міркування щодо створення та інтеграції чат-додатків у існуючі системи.
- Налаштувати чат-додатки для конкретних випадків використання.
- Визначити ключові показники та міркування для ефективного моніторингу та підтримки якості чат-додатків на базі ШІ.
- Забезпечити, щоб чат-додатки використовували ШІ відповідально.

## Інтеграція генеративного ШІ у чат-додатки

Підвищення рівня чат-додатків за допомогою генеративного ШІ не тільки зосереджено на тому, щоб зробити їх розумнішими; йдеться про оптимізацію їхньої архітектури, продуктивності та інтерфейсу користувача, щоб забезпечити якісний досвід користувача. Це включає дослідження архітектурних основ, інтеграцій API та міркувань щодо інтерфейсу користувача. Цей розділ має на меті запропонувати вам комплексну дорожню карту для навігації цими складними ландшафтами, незалежно від того, чи ви інтегруєте їх у існуючі системи, чи створюєте їх як окремі платформи.

До кінця цього розділу ви будете озброєні знаннями, необхідними для ефективного створення та впровадження чат-додатків.

### Чатбот чи чат-додаток?

Перш ніж ми заглибимося у створення чат-додатків, давайте порівняємо 'чатботів' з 'чат-додатками на базі ШІ', які виконують різні ролі та функції. Основна мета чатбота – автоматизувати конкретні розмовні завдання, такі як відповіді на часті запитання або відстеження пакета. Зазвичай він керується правилами логіки або складними алгоритмами ШІ. На відміну від цього, чат-додаток на базі ШІ є набагато ширшим середовищем, призначеним для забезпечення різних форм цифрового спілкування, таких як текстові, голосові та відеочати між користувачами-людьми. Його визначальною особливістю є інтеграція генеративної моделі ШІ, яка імітує нюансовані, схожі на людські розмови, генеруючи відповіді на основі широкого різноманіття вхідних даних та контекстуальних сигналів. Чат-додаток на базі генеративного ШІ може вести відкриті дискусії, адаптуватися до еволюційних контекстів розмови і навіть створювати творчий або складний діалог.

Наведена нижче таблиця окреслює ключові відмінності та подібності, щоб допомогти нам зрозуміти їх унікальні ролі в цифровому спілкуванні.

| Чатбот                                 | Чат-додаток на базі генеративного ШІ      |
| -------------------------------------- | ------------------------------------------ |
| Орієнтований на завдання та на правила | Контекстно-усвідомлений                   |
| Часто інтегрований у більші системи    | Може містити одного або кількох чатботів  |
| Обмежений запрограмованими функціями   | Інтегрує генеративні моделі ШІ            |
| Спеціалізовані та структуровані взаємодії | Здатний до відкритих дискусій           |

### Використання вже готових функціональностей з SDK та API

При створенні чат-додатку хорошим першим кроком є оцінка того, що вже існує. Використання SDK та API для створення чат-додатків є вигідною стратегією з різних причин. Інтегруючи добре документовані SDK та API, ви стратегічно позиціонуєте свій додаток для довгострокового успіху, вирішуючи питання масштабованості та обслуговування.

- **Прискорює процес розробки та зменшує накладні витрати**: Покладаючись на вже готові функціональності замість дорогого процесу створення їх самостійно, ви можете зосередитися на інших аспектах вашого додатку, які можуть бути важливішими, наприклад, на бізнес-логіці.
- **Краща продуктивність**: При створенні функціональності з нуля, ви кінець кінцем запитаєте себе "Як це масштабується? Чи здатний цей додаток впоратися з раптовим напливом користувачів?" Добре підтримувані SDK та API часто мають вбудовані рішення для цих проблем.
- **Легше обслуговування**: Оновлення та вдосконалення легше керувати, оскільки більшість API та SDK просто вимагають оновлення бібліотеки, коли випускається новіша версія.
- **Доступ до передових технологій**: Використання моделей, які були тонко налаштовані та навчені на великих наборах даних, забезпечує ваш додаток можливостями обробки природної мови.

Доступ до функціональності SDK або API зазвичай включає отримання дозволу на використання наданих послуг, що часто здійснюється за допомогою унікального ключа або токена автентифікації. Ми будемо використовувати бібліотеку OpenAI Python, щоб дослідити, як це виглядає. Ви також можете спробувати це самостійно в наступному [ноутбуці для OpenAI](./python/oai-assignment.ipynb?WT.mc_id=academic-105485-koreyst) або [ноутбуці для Azure OpenAI Services](./python/aoai-assignment.ipynb?WT.mc_id=academic-105485-koreys) для цього уроку.

```python
import os
from openai import OpenAI

API_KEY = os.getenv("OPENAI_API_KEY","")

client = OpenAI(
    api_key=API_KEY
    )

chat_completion = client.chat.completions.create(model="gpt-3.5-turbo", messages=[{"role": "user", "content": "Suggest two titles for an instructional lesson on chat applications for generative AI."}])
```

Наведений вище приклад використовує модель GPT-3.5 Turbo для завершення промпту, але зверніть увагу, що ключ API встановлюється перед цим. Ви отримали б помилку, якби не встановили ключ.

## Досвід користувача (UX)

Загальні принципи UX застосовуються до чат-додатків, але ось деякі додаткові міркування, які стають особливо важливими через компоненти машинного навчання, що задіяні.

- **Механізм для вирішення неоднозначності**: Генеративні моделі ШІ іноді генерують неоднозначні відповіді. Функція, яка дозволяє користувачам просити уточнення, може бути корисною, якщо вони зіткнуться з цією проблемою.
- **Збереження контексту**: Передові генеративні моделі ШІ мають здатність запам'ятовувати контекст у розмові, що може бути необхідним активом для досвіду користувача. Надання користувачам можливості контролювати та керувати контекстом покращує досвід користувача, але вводить ризик збереження конфіденційної інформації користувача. Міркування щодо того, як довго ця інформація зберігається, наприклад, запровадження політики збереження, може збалансувати потребу в контексті відносно приватності.
- **Персоналізація**: З можливістю навчатися та адаптуватися, моделі ШІ пропонують індивідуалізований досвід для користувача. Налаштування досвіду користувача через такі функції, як профілі користувачів, не тільки змушує користувача відчувати себе зрозумілим, але й допомагає їхньому прагненню знайти конкретні відповіді, створюючи більш ефективну та задовільну взаємодію.

Одним з таких прикладів персоналізації є налаштування "Користувацькі інструкції" в ChatGPT від OpenAI. Воно дозволяє вам надавати інформацію про себе, яка може бути важливим контекстом для ваших промптів. Ось приклад користувацької інструкції.

![Налаштування користувацьких інструкцій в ChatGPT](./images/custom-instructions.png?WT.mc_id=academic-105485-koreyst)

Цей "профіль" спонукає ChatGPT створити план уроку про зв'язані списки. Зверніть увагу, що ChatGPT враховує, що користувач може хотіти більш глибокий план уроку на основі її досвіду.

![Промпт в ChatGPT для плану уроку про зв'язані списки](./images/lesson-plan-prompt.png?WT.mc_id=academic-105485-koreyst)

### Система повідомлень Microsoft для моделей великих мовних моделей

[Microsoft надала керівництво](https://learn.microsoft.com/azure/ai-services/openai/concepts/system-message#define-the-models-output-format?WT.mc_id=academic-105485-koreyst) для написання ефективних системних повідомлень при генерації відповідей від LLM, розбитих на 4 області:

1. Визначення, для кого призначена модель, а також її можливості та обмеження.
2. Визначення формату виводу моделі.
3. Надання конкретних прикладів, які демонструють очікувану поведінку моделі.
4. Надання додаткових поведінкових обмежень.

### Доступність

Незалежно від того, чи має користувач візуальні, слухові, моторні чи когнітивні порушення, добре розроблений чат-додаток повинен бути використовуваний всіма. Наступний список розкриває конкретні функції, спрямовані на підвищення доступності для різних порушень користувачів.

- **Функції для візуальних порушень**: Теми з високим контрастом і текст зі змінним розміром, сумісність зі зчитувачами екрану.
- **Функції для слухових порушень**: Функції перетворення тексту на мовлення і мовлення на текст, візуальні сигнали для аудіоповідомлень.
- **Функції для моторних порушень**: Підтримка навігації з клавіатури, голосові команди.
- **Функції для когнітивних порушень**: Опції спрощеної мови.

## Налаштування та тонке налаштування для доменно-специфічних мовних моделей

Уявіть чат-додаток, який розуміє жаргон вашої компанії та передбачає конкретні запити, які часто має його база користувачів. Є кілька підходів, які варто згадати:

- **Використання моделей DSL**. DSL означає доменно-специфічну мову. Ви можете використовувати так звану модель DSL, навчену на конкретному домені, щоб розуміти його концепції та сценарії.
- **Застосування тонкого налаштування**. Тонке налаштування — це процес подальшого навчання вашої моделі конкретними даними.

## Налаштування: Використання DSL

Використання доменно-специфічних мовних моделей (моделі DSL) може підвищити залучення користувачів, надаючи спеціалізовані, контекстуально релевантні взаємодії. Це модель, яка навчена або тонко налаштована для розуміння та генерації тексту, пов'язаного з конкретною галуззю, індустрією або предметом. Варіанти використання моделі DSL можуть варіюватися від навчання її з нуля до використання вже існуючих через SDK та API. Ще одним варіантом є тонке налаштування, яке включає взяття існуючої попередньо навченої моделі та адаптацію її для конкретного домену.

## Налаштування: Застосування тонкого налаштування

Тонке налаштування часто розглядається, коли попередньо навчена модель не справляється в спеціалізованому домені або конкретному завданні.

Наприклад, медичні запити є складними та вимагають багато контексту. Коли медичний працівник діагностує пацієнта, це базується на різних факторах, таких як спосіб життя або вже існуючі умови, і може навіть спиратися на недавні медичні журнали для підтвердження їхнього діагнозу. У таких нюансованих сценаріях чат-додаток загального призначення на базі ШІ не може бути надійним джерелом.

### Сценарій: медичний додаток

Розгляньте чат-додаток, розроблений для допомоги медичним працівникам, надаючи швидкі посилання на настанови з лікування, взаємодії ліків або останні результати досліджень.

Модель загального призначення може бути достатньою для відповіді на базові медичні питання або надання загальних порад, але вона може мати труднощі з наступним:

- **Дуже специфічні або складні випадки**. Наприклад, невролог може запитати додаток: "Які поточні найкращі практики для лікування резистентної до ліків епілепсії у педіатричних пацієнтів?"
- **Відсутність останніх досягнень**. Модель загального призначення може мати труднощі з наданням поточної відповіді, яка враховує останні досягнення в неврології та фармакології.

У таких випадках тонке налаштування моделі зі спеціалізованим медичним набором даних може значно покращити її здатність обробляти ці складні медичні запити більш точно та надійно. Це вимагає доступу до великого та релевантного набору даних, який представляє специфічні для домену виклики та питання, які потрібно вирішити.

## Міркування для високоякісного чат-досвіду на базі ШІ

Цей розділ окреслює критерії для "високоякісних" чат-додатків, які включають збір показників, що можуть бути використані для дій, та дотримання структури, яка відповідально використовує технологію ШІ.

### Ключові показники

Для підтримки високоякісної роботи додатку необхідно відстежувати ключові показники та міркування. Ці вимірювання не лише забезпечують функціональність додатку, але й оцінюють якість моделі ШІ та досвід користувача. Нижче наведено список, який охоплює базові показники, показники ШІ та досвіду користувача, які варто врахувати.

| Показник                      | Визначення                                                                                                          | Міркування для розробника чату                                          |
| ----------------------------- | ------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------- |
| **Час роботи**                | Вимірює час, протягом якого додаток є операційним та доступним для користувачів.                                     | Як ви будете мінімізувати час простою?                                  |
| **Час відповіді**             | Час, який додаток витрачає на відповідь на запит користувача.                                                       | Як ви можете оптимізувати обробку запитів для покращення часу відповіді? |
| **Точність**                  | Співвідношення істинно позитивних прогнозів до загальної кількості позитивних прогнозів.                            | Як ви будете перевіряти точність вашої моделі?                          |
| **Повнота (Чутливість)**      | Співвідношення істинно позитивних прогнозів до фактичної кількості позитивів.                                       | Як ви будете вимірювати та покращувати повноту?                         |
| **F1 Score**                  | Гармонійне середнє між точністю та повнотою, яке балансує компроміс між обома.                                      | Який ваш цільовий F1 Score? Як ви будете балансувати точність і повноту? |
| **Перплексія**                | Вимірює, наскільки добре розподіл ймовірностей, передбачений моделлю, відповідає фактичному розподілу даних.       | Як ви будете мінімізувати перплексію?                                   |
| **Показники задоволення користувачів** | Вимірює сприйняття додатку користувачем. Часто збирається через опитування.                                    | Як часто ви будете збирати відгуки користувачів? Як ви будете адаптувати їх? |
| **Частота помилок**           | Частота, з якою модель робить помилки в розумінні або виводі.                                                        | Які стратегії ви маєте для зменшення частоти помилок?                   |
| **Цикли перенавчання**        | Частота, з якою модель оновлюється для включення нових даних та інсайтів.                                            | Як часто ви будете перенавчати модель? Що запускає цикл перенавчання?    |
| **Виявлення аномалій**        | Інструменти та техніки для ідентифікації незвичайних шаблонів, які не відповідають очікуваній поведінці.            | Як ви будете реагувати на аномалії?                                     |

### Впровадження практик відповідального ШІ в чат-додатках

Підхід Microsoft до відповідального ШІ визначив шість принципів, які повинні керувати розробкою та використанням ШІ. Нижче наведено принципи, їх визначення та речі, які розробник чату повинен враховувати, і чому він повинен серйозно ставитися до них.

| Принципи               | Визначення Microsoft                                      | Міркування для розробника чату                                     | Чому це важливо                                                                  |
| ---------------------- | --------------------------------------------------------- | ------------------------------------------------------------------ | --------------------------------------------------------------------------------- |
| Справедливість         | Системи ШІ повинні ставитися до всіх людей справедливо.  | Забезпечити, щоб чат-додаток не дискримінував на основі даних користувача. | Для побудови довіри та інклюзивності серед користувачів; уникнення юридичних наслідків. |
| Надійність та безпека  | Системи ШІ повинні працювати надійно та безпечно.        | Впровадити тестування та захисні механізми для мінімізації помилок та ризиків. | Забезпечує задоволення користувачів та запобігає потенційній шкоді.              |
| Приватність та безпека | Системи ШІ повинні бути захищеними та поважати приватність. | Впровадити сильне шифрування та заходи захисту даних.               | Для захисту конфіденційних даних користувачів та відповідності законам про приватність. |
| Інклюзивність          | Системи ШІ повинні надавати можливості всім та залучати людей. | Розробити інтерфейс користувача, який є доступним та простим у використанні для різноманітної аудиторії. | Забезпечує, щоб ширше коло людей могло ефективно використовувати додаток.        |
| Прозорість             | Системи ШІ повинні бути зрозумілими.                     | Надати чітку документацію та обґрунтування для відповідей ШІ.       | Користувачі з більшою ймовірністю довіряють системі, якщо вони можуть зрозуміти, як приймаються рішення. |
| Відповідальність       | Люди повинні бути відповідальними за системи ШІ.         | Встановити чіткий процес для аудиту та покращення рішень ШІ.        | Дозволяє постійне вдосконалення та коригувальні заходи у випадку помилок.        |

## Завдання

Дивіться [завдання](./python?WT.mc_id=academic-105485-koreyst), яке проведе вас через серію вправ від запуску ваших перших чат-промптів до класифікації та підсумовування тексту і багато іншого. Зверніть увагу, що завдання доступні на різних мовах програмування!

## Чудова робота! Продовжуйте подорож

Після завершення цього уроку, перегляньте нашу [Колекцію навчальних матеріалів з генеративного ШІ](https://aka.ms/genai-collection?WT.mc_id=academic-105485-koreyst), щоб продовжити підвищувати ваші знання з генеративного ШІ!

Переходьте до Уроку 8, щоб побачити, як ви можете почати [створювати пошукові додатки](../08-building-search-applications/README.md?WT.mc_id=academic-105485-koreyst)!